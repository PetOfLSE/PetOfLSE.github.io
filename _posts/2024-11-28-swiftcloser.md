---
title: Swift - 클로저, 클로저 표현식에 대해서 알아보자.
date: 2024-11-28 00:00:00 + 09:00
categories: [iOS, Swift]
tags: [swift, Closure]
---

오늘은 클로저와 클로저 표현식에 대해서 공부하였다.<Br>
공부한 내용을 바탕으로 오늘은 클로저와 클로저 표현식에 대해서 설명하겠다.

우선 클로저 표현식부터 알아보자.

## ❓ **클로저 표현식이란?**
클로저 표현식은 쉽게 생각해서 이름 없는 함수라고 생각하면 이해하기 편하다.<br>
아래 예시를 통해서 클로저 표현식에 대해서 간단하게 확인해보자.

예시
```swift
let example = { print("Example Closure") }
example()
```
실행 결과
```
Example Closure
```
위 예시에서 example 상수에 할당하고 있는 코드가 클로저 표현식이다. 사실 함수를 제대로 이해했다면 클로저 표현식은 어렵지 않게 이해할 수 있다.

클로저 표현식을 통해서 매개변수를 받고 값을 반환하는 것도 가능한데 바로 알아보도록 하자.

### **클로저 표현식 매개변수, 반환값 사용**
클로저 표현식 구조
```swift
{(매개변수1: 데이터 타입, 매개변수2: 데이터 타입) -> 반환값 in 
  // 수행할 코드
}
```

위와 같은 구조를 가지고 있다. 이렇게 구조로만 보면 좀 헷갈릴 수도 있지만 예시를 통해서 이해해보자.

예시
```swift
let add = {(num1: Int, num2: Int) -> Int in
  return num1 + num2
}

var result = add(10, 20)
print(result)
```

실행 결과
```
30
```

위 코드처럼 함수와 약간의 차이만 있을뿐 거의 유사한 형태를 가지고 있다.

이때 함수를 제대로 이해하고 있는 사람이라면 뭔가 이상한 부분을 눈치 챘을 것이다.

바로 외부 매개변수명을 밑줄(_)로 없애지 않았는데도 매개변수를 사용하지 않고 인수를 전달했다는 것이다.

클로저 표현식은 함수와 다르게 **인수를 전달할때 외부 매개변수명을 밑줄(_)로 없애지 않아도 인수만 전달이 가능**하다.

이런 클로저 표현식에도 아주 큰 단점이 있다.

코드가 길어질수록 읽기가 힘들어지고 복잡해진다는 것이다.<Br>
이런점을 해결할 수 있는 방법은 약식 인수를 사용하는 것이다.

바로 알아보자.

### **약식 인수**
약식 인수를 사용하면 **매개변수 이름과 in 키워드를 생략**할 수 있으며 **달러($)를 사용해서 인수를 참조** 할 수 있다.<br>

아래와 같은 클로저 표현식 코드가 있다고 가정해보자.
```swift
let add = {(num1: Int, num2: Int) -> Int in 
  return num1 + num2
}

print(add(10, 20))
``` 
위 코드를 약식 인수를 사용해서 단순화시키면 아래와 같은 코드가 된다.
```swift
let add: (Int, Int) -> Int = {
  return $0 + $1
}

print(add(10, 20))
```

실행 결과
```
30
```
위 두 코드의 실행 결과는 30으로 동일하다.

클로저 표현식에 대해서 알아봤으니 이제 클로저에 대해서 알아보자.
## ❓ **클로저란?**
**변수나 상수를 포획**하여 저장할 수 있는 함수 또는 클로저 표현식을 뜻한다.

>포획이란?<Br>
>자신이 정의된 스코프의 외부 변수나 상수에 접근하여 그 값을 저장하고 유지하는 동작을 뜻한다.

설명만 들어선 잘 이해가 안될 수 있다.<Br>
예시를 통해서 확인해보자.

예시
```swift
func example() -> () -> Int{
  var exampleNum = 0

  func example2() -> Int{
    return exampleNum + 10
  }

  return example2
}

let exampleFunc = example()
let exampleResult = exampleFunc()

print(exampleResult)
```

실행 결과
```
10
```
example2라는 함수는 자신이 정의된 스코프 내에 있는 exampleNum 이라는 변수를 포획하고 있기 때문에 클로저로 간주가 가능하다.

다른 예시도 살펴보자.

예시
```swift
func example(num: Int) -> (Int) -> Int{
  return { value in
    return value * num
  }
}

let exampleFunc = example(num: 5)
let result = exampleFunc(3)

print(result)
```

실행 결과
```
15
```
위 코드는 클로저 표현식에서 외부 변수 num을 포획했기 때문에 클로저로 간주된다.

## 🗂️ **정리**
클로저 표현식은 이름 없는 함수로 생각하면 이해하기가 쉬우며 클로저는 변수나 상수를 포획하여 사용할 수 있는 함수나 클로저 표현식을 뜻한다.

## 💭 **느낀점**
클로저 표현식은 쉽게 이해가 가능했지만 약식 인수나 클로저의 개념이 이해가 잘 가지 않아서 많이 고생했지만 잘 알아두면 도움이 많이 될 것 같다.

## 📚 **참고자료**
- [핵심만 골라 배우는 SwiftUI 기반의 iOS 프로그래밍], 닐 스미스 저, 황반석 옮김, 제이펍 출판